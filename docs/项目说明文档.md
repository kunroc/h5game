# H5Game - Vue3 å“åº”å¼æ¸¸æˆé¡¹ç›®

ä¸€ä¸ªåŸºäº Vue3 + TypeScript + Vite çš„ç°ä»£åŒ–å“åº”å¼ H5 æ¸¸æˆé¡¹ç›®ï¼Œæ”¯æŒç§»åŠ¨ç«¯å’Œ PC ç«¯è‡ªé€‚åº”ï¼Œé‡‡ç”¨ç»Ÿä¸€çš„ rem é€‚é…æ–¹æ¡ˆã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Vue 3.5.17** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript 5.8** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Vite 5.4** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- **Vue Router 4.5** - Vue.js å®˜æ–¹è·¯ç”±ç®¡ç†å™¨
- **Pinia 3.0** - Vue çš„çŠ¶æ€ç®¡ç†åº“

### UI ç»„ä»¶åº“

- **Element Plus 2.10** - PC ç«¯ UI ç»„ä»¶åº“
- **Vant 4.9** - ç§»åŠ¨ç«¯ UI ç»„ä»¶åº“
- æ ¹æ®è®¾å¤‡ç±»å‹è‡ªåŠ¨åŠ è½½å¯¹åº”çš„ UI ç»„ä»¶

### æ ·å¼å¤„ç†

- **Less 4.4** - CSS é¢„å¤„ç†å™¨
- **PostCSS + Autoprefixer** - CSS åå¤„ç†
- **postcss-pxtorem** - px è‡ªåŠ¨è½¬æ¢ä¸º rem
- ç»Ÿä¸€çš„ rem é€‚é…æ–¹æ¡ˆ

### å¼€å‘å·¥å…·

- **ESLint + Prettier** - ä»£ç è§„èŒƒå’Œæ ¼å¼åŒ–
- **Vue DevTools** - Vue å¼€å‘è€…å·¥å…·
- **TypeScript ä¸¥æ ¼æ¨¡å¼** - ç±»å‹æ£€æŸ¥

## ğŸ“ é¡¹ç›®ç»“æ„

```
h5game/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/            # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ images/        # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ styles/        # æ ·å¼æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ base.css   # åŸºç¡€æ ·å¼
â”‚   â”‚       â”œâ”€â”€ main.less  # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â”‚       â””â”€â”€ variables.less # Less å˜é‡
â”‚   â”œâ”€â”€ plugins/           # æ’ä»¶é…ç½®
â”‚   â”‚   â””â”€â”€ ui.ts         # UI ç»„ä»¶åº“é…ç½®
â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts      # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ scripts/           # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ device.ts     # è®¾å¤‡æ£€æµ‹
â”‚   â”‚   â””â”€â”€ rem.ts        # rem é€‚é…
â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/       # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ desktop/      # PC ç«¯é¡µé¢
â”‚   â”‚   â””â”€â”€ mobile/       # ç§»åŠ¨ç«¯é¡µé¢
â”‚   â”œâ”€â”€ App.vue           # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts           # å…¥å£æ–‡ä»¶
â”œâ”€â”€ .editorconfig          # ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ .gitignore            # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .prettierrc.json      # Prettier é…ç½®
â”œâ”€â”€ eslint.config.ts      # ESLint é…ç½®
â”œâ”€â”€ postcss.config.js     # PostCSS é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®ä¾èµ–
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å“åº”å¼é€‚é…ç³»ç»Ÿ

#### è®¾å¤‡æ£€æµ‹ (`utils/device.ts`)

- è‡ªåŠ¨æ£€æµ‹è®¾å¤‡ç±»å‹ï¼ˆç§»åŠ¨ç«¯/å¹³æ¿/PCç«¯ï¼‰
- å“åº”å¼æ–­ç‚¹ï¼šç§»åŠ¨ç«¯ < 768pxï¼Œå¹³æ¿ 768-1024pxï¼ŒPCç«¯ > 1024px
- è®¾å¤‡ç±»å‹å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½é¡µé¢

#### rem é€‚é…æ–¹æ¡ˆ (`utils/rem.ts`)

- **ç§»åŠ¨ç«¯**ï¼šåŸºäº 375px è®¾è®¡ç¨¿ï¼ŒåŸºå‡†å­—ä½“ 16px
- **PCç«¯**ï¼šåŸºäº 1920px è®¾è®¡ç¨¿ï¼ŒåŸºå‡†å­—ä½“ 16px
- åŠ¨æ€è®¡ç®—æ ¹å…ƒç´ å­—ä½“å¤§å°ï¼Œæ”¯æŒå±å¹•å°ºå¯¸å˜åŒ–
- æä¾› px â†” rem è½¬æ¢å·¥å…·å‡½æ•°

### 2. æ™ºèƒ½ UI ç»„ä»¶åŠ è½½ (`plugins/ui.ts`)

```typescript
// æ ¹æ®è®¾å¤‡ç±»å‹è‡ªåŠ¨åŠ è½½å¯¹åº”çš„ UI ç»„ä»¶åº“
if (deviceType === 'mobile') {
  // åŠ è½½ Vant ç§»åŠ¨ç«¯ç»„ä»¶
  app.use(VanButton, VanField, VanForm...)
} else {
  // åŠ è½½ Element Plus PCç«¯ç»„ä»¶
  app.use(ElButton, ElInput, ElForm...)
}
```

### 3. æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ (`router/index.ts`)

```typescript
// æ ¹æ®è®¾å¤‡ç±»å‹åŠ¨æ€åŠ è½½å¯¹åº”é¡µé¢ç»„ä»¶
component: () => {
  const deviceType = getDeviceType()
  return deviceType === 'mobile'
    ? import('@/views/mobile/HomeView.vue')
    : import('@/views/desktop/HomeView.vue')
}
```

### 4. ç»Ÿä¸€æ ·å¼ç³»ç»Ÿ

#### Less å˜é‡ç³»ç»Ÿ (`assets/styles/variables.less`)

- ä¸»é¢˜è‰²å½©ï¼šprimaryã€successã€warningã€errorã€info
- é—´è·ç³»ç»Ÿï¼špadding/margin (xs: 8px, sm: 12px, md: 16px, lg: 24px)
- å­—ä½“å¤§å°ï¼š12px - 24px å®Œæ•´å­—å·ä½“ç³»
- å“åº”å¼æ–­ç‚¹ï¼šxs(480px) - xxl(1600px)

#### å·¥å…·ç±»ç³»ç»Ÿ (`assets/styles/main.less`)

- **æ–‡å­—å¤§å°**ï¼š`.text-xs` ~ `.text-3xl` (0.75rem - 1.875rem)
- **é—´è·å·¥å…·**ï¼š`.p-1` ~ `.p-6`, `.m-1` ~ `.m-6`
- **ä¸»é¢˜è‰²å½©**ï¼š`.text-primary`, `.bg-primary` ç­‰
- **è¾¹æ¡†é˜´å½±**ï¼š`.border`, `.shadow` ç­‰

### 5. PostCSS è‡ªåŠ¨åŒ–å¤„ç†

```javascript
// postcss.config.js - px è‡ªåŠ¨è½¬ rem
'postcss-pxtorem': {
  rootValue: 16,        // 1rem = 16px
  unitPrecision: 3,     // è½¬æ¢ç²¾åº¦
  propList: ['*'],      // è½¬æ¢æ‰€æœ‰å±æ€§
  minPixelValue: 1,     // æœ€å°è½¬æ¢å€¼
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- npm >= 8

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
# è®¿é—® http://localhost:3000
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–

```bash
npm run lint      # ESLint æ£€æŸ¥
npm run format    # Prettier æ ¼å¼åŒ–
npm run type-check # TypeScript ç±»å‹æ£€æŸ¥
```

## ğŸ“± é€‚é…è¯´æ˜

### ç§»åŠ¨ç«¯é€‚é…

- ä½¿ç”¨ Vant UI ç»„ä»¶åº“
- åŸºäº 375px è®¾è®¡ç¨¿çš„ rem é€‚é…
- æ”¯æŒå®‰å…¨åŒºåŸŸé€‚é…ï¼ˆåˆ˜æµ·å±ç­‰ï¼‰
- è§¦æ‘¸å‹å¥½çš„äº¤äº’è®¾è®¡

### PCç«¯é€‚é…

- ä½¿ç”¨ Element Plus UI ç»„ä»¶åº“
- åŸºäº 1920px è®¾è®¡ç¨¿çš„ rem é€‚é…
- å“åº”å¼æ …æ ¼å¸ƒå±€
- é¼ æ ‡äº¤äº’ä¼˜åŒ–

### å¹³æ¿é€‚é…

- è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ UI ç»„ä»¶åº“
- ä»‹äºç§»åŠ¨ç«¯å’ŒPCç«¯ä¹‹é—´çš„é€‚é…ç­–ç•¥

## ğŸ¨ æ ·å¼å¼€å‘è§„èŒƒ

### 1. ä½¿ç”¨ rem å•ä½

```less
// âœ… æ¨èï¼šä½¿ç”¨ rem å•ä½
.container {
  padding: 1rem; // 16px
  font-size: 0.875rem; // 14px
}

// âŒ é¿å…ï¼šç›´æ¥ä½¿ç”¨ pxï¼ˆPostCSS ä¼šè‡ªåŠ¨è½¬æ¢ï¼‰
.container {
  padding: 16px; // ä¼šè¢«è½¬æ¢ä¸º 1rem
}
```

### 2. ä½¿ç”¨ Less å˜é‡

```less
// âœ… æ¨èï¼šä½¿ç”¨é¢„å®šä¹‰å˜é‡
.card {
  padding: @padding-md;
  border-radius: @border-radius-base;
  box-shadow: @box-shadow-base;
}
```

### 3. ä½¿ç”¨å·¥å…·ç±»

```vue
<!-- âœ… æ¨èï¼šä½¿ç”¨å·¥å…·ç±» -->
<div class="p-4 m-2 text-lg bg-primary">
  å†…å®¹
</div>
```

## ğŸ”§ é…ç½®è¯´æ˜

### Vite é…ç½® (`vite.config.ts`)

- è·¯å¾„åˆ«åï¼š`@` æŒ‡å‘ `src` ç›®å½•
- Less é¢„å¤„ç†å™¨é…ç½®
- PostCSS é›†æˆ
- å¼€å‘æœåŠ¡å™¨é…ç½®ï¼ˆç«¯å£ 3000ï¼‰
- æ„å»ºä¼˜åŒ–é…ç½®

### TypeScript é…ç½®

- ä¸¥æ ¼æ¨¡å¼å¯ç”¨
- è·¯å¾„æ˜ å°„é…ç½®
- Vue å•æ–‡ä»¶ç»„ä»¶æ”¯æŒ

### ESLint + Prettier

- Vue 3 + TypeScript è§„åˆ™é›†
- è‡ªåŠ¨æ ¼å¼åŒ–é…ç½®
- ä»£ç è´¨é‡æ£€æŸ¥

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. æ™ºèƒ½ä»£ç åˆ†åŒ…

é¡¹ç›®é‡‡ç”¨æ™ºèƒ½åˆ†åŒ…ç­–ç•¥ï¼Œç¡®ä¿ä¸åŒè®¾å¤‡ç±»å‹åªåŠ è½½å¿…è¦çš„ä»£ç ï¼Œæ˜¾è‘—æå‡åŠ è½½æ€§èƒ½ã€‚

#### åˆ†åŒ…è§„åˆ™é…ç½®

```typescript
// vite.config.ts - manualChunks é…ç½®
manualChunks: (id) => {
  // åŸºç¡€æ¡†æ¶ä¾èµ–åŒ… - åªåŒ…å«æ ¸å¿ƒæ¡†æ¶
  if (id.includes('node_modules')) {
    // Element Plus å®Œå…¨ç‹¬ç«‹åˆ° desktop
    if (id.includes('element-plus')) {
      return 'desktop-vendor';
    }
    // Vant å®Œå…¨ç‹¬ç«‹åˆ° mobile
    if (id.includes('vant')) {
      return 'mobile-vendor';
    }
    // å…¶ä»–ç¬¬ä¸‰æ–¹åº“æ ¹æ®ä½¿ç”¨æƒ…å†µåˆ†é…
    return 'vendor';
  }
  // æ¡Œé¢ç«¯ç›¸å…³æ–‡ä»¶ - åŒ…å«æ‰€æœ‰æ¡Œé¢ç«¯ä¾èµ–
  if (id.includes('src/views/desktop') || id.includes('src/plugins/ui-desktop')) {
    return 'page-desktop';
  }
  // ç§»åŠ¨ç«¯ç›¸å…³æ–‡ä»¶ - åŒ…å«æ‰€æœ‰ç§»åŠ¨ç«¯ä¾èµ–
  if (id.includes('src/views/mobile') || id.includes('src/plugins/ui-mobile')) {
    return 'page-mobile';
  }
  // å…¶ä»–æ–‡ä»¶é»˜è®¤åˆ†é…åˆ°ä¸»åŒ…
  return 'index';
}
```

#### åˆ†åŒ…äº§ç‰©è¯´æ˜

æ„å»ºååœ¨ `dist/assets/js/` ç›®å½•å¯çœ‹åˆ°ä»¥ä¸‹åˆ†åŒ…æ–‡ä»¶ï¼š

- **`vendor-[hash].js`** - Vue æ ¸å¿ƒåº“ï¼ˆvueã€vue-routerã€piniaç­‰ï¼‰
- **`desktop-vendor-[hash].js`** - Element Plus UIåº“ï¼ˆä»…PCç«¯åŠ è½½ï¼‰
- **`mobile-vendor-[hash].js`** - Vant UIåº“ï¼ˆä»…ç§»åŠ¨ç«¯åŠ è½½ï¼‰
- **`page-desktop-[hash].js`** - æ¡Œé¢ç«¯é¡µé¢å’Œç»„ä»¶
- **`page-mobile-[hash].js`** - ç§»åŠ¨ç«¯é¡µé¢å’Œç»„ä»¶
- **`index-[hash].js`** - ä¸»å…¥å£æ–‡ä»¶

#### åˆ†åŒ…ä¼˜åŠ¿

- **å‡å°‘åŒ…ä½“ç§¯**ï¼šç§»åŠ¨ç«¯ä¸åŠ è½½PCç«¯UIåº“ï¼ŒPCç«¯ä¸åŠ è½½ç§»åŠ¨ç«¯UIåº“
- **æå‡åŠ è½½é€Ÿåº¦**ï¼šæŒ‰éœ€åŠ è½½å‡å°‘é¦–å±åŠ è½½æ—¶é—´30-50%
- **ä¼˜åŒ–ç¼“å­˜ç­–ç•¥**ï¼šä¸åŒè®¾å¤‡ç±»å‹çš„ä»£ç åˆ†åˆ«ç¼“å­˜
- **å®Œå…¨ç‹¬ç«‹**ï¼šæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ä»£ç åŒ…å®Œå…¨ç‹¬ç«‹ï¼Œæ— äº¤å‰ä¾èµ–

### 2. æŒ‰éœ€åŠ è½½

- UI ç»„ä»¶æŒ‰è®¾å¤‡ç±»å‹æŒ‰éœ€åŠ è½½
- è·¯ç”±ç»„ä»¶æ‡’åŠ è½½
- ç¬¬ä¸‰æ–¹åº“æŒ‰éœ€å¼•å…¥

### 3. æ„å»ºä¼˜åŒ–

- Vite å¿«é€Ÿçƒ­æ›´æ–°
- ä»£ç åˆ†å‰²å’Œ Tree Shaking
- èµ„æºå‹ç¼©å’Œä¼˜åŒ–
- æ™ºèƒ½åˆ†åŒ…å‡å°‘å†—ä½™ä»£ç 

### 4. æ ·å¼ä¼˜åŒ–

- Less å˜é‡å¤ç”¨
- PostCSS è‡ªåŠ¨ä¼˜åŒ–
- CSS å·¥å…·ç±»å‡å°‘é‡å¤ä»£ç 

## ğŸš€ éƒ¨ç½²

### æ„å»ºå‘½ä»¤

```bash
npm run build
```

### æ„å»ºäº§ç‰©

- `dist/` ç›®å½•åŒ…å«æ‰€æœ‰æ„å»ºæ–‡ä»¶
- é™æ€èµ„æºè‡ªåŠ¨æ·»åŠ  hash
- æ”¯æŒ CDN éƒ¨ç½²

### ç¯å¢ƒé…ç½®

- æ”¯æŒå¤šç¯å¢ƒé…ç½®
- ç¯å¢ƒå˜é‡ç®¡ç†
- æ„å»ºä¼˜åŒ–é…ç½®

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**H5Game** - ç°ä»£åŒ–å“åº”å¼ H5 æ¸¸æˆå¼€å‘è§£å†³æ–¹æ¡ˆ ğŸ®
